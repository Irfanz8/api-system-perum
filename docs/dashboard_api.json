{
  "openapi": "3.0.0",
  "info": {
    "title": "API Dashboard System Perumahan",
    "version": "1.0.0",
    "description": "Documentation for Dashboard endpoints"
  },
  "servers": [
    {
      "url": "http://localhost:3000",
      "description": "Development"
    }
  ],
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      }
    }
  },
  "security": [
    {
      "bearerAuth": []
    }
  ],
  "paths": {
    "/api/dashboard/stats": {
      "get": {
        "summary": "Get dashboard statistics",
        "description": "Get summary metrics for dashboard (properties, sales, finance)",
        "tags": ["Dashboard"],
        "parameters": [
          {
            "name": "startDate",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "date"
            },
            "description": "Filter start date (ISO format)"
          },
          {
            "name": "endDate",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "date"
            },
            "description": "Filter end date (ISO format)"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "data": {
                      "type": "object",
                      "properties": {
                        "properties": {
                          "type": "object",
                          "properties": {
                            "total": { "type": "integer" },
                            "available": { "type": "integer" },
                            "sold": { "type": "integer" },
                            "reserved": { "type": "integer" }
                          }
                        },
                        "sales": {
                          "type": "object",
                          "properties": {
                            "total_count": { "type": "integer" },
                            "total_revenue": { "type": "number" },
                            "pending_count": { "type": "integer" }
                          }
                        },
                        "finance": {
                          "type": "object",
                          "properties": {
                            "total_income": { "type": "number" },
                            "total_expense": { "type": "number" },
                            "balance": { "type": "number" }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/dashboard/finance-chart": {
      "get": {
        "summary": "Get financial chart data",
        "description": "Get time series data for income and expense",
        "tags": ["Dashboard"],
        "parameters": [
          {
            "name": "startDate",
            "in": "query",
            "schema": { "type": "string", "format": "date" },
            "required": true
          },
          {
            "name": "endDate",
            "in": "query",
            "schema": { "type": "string", "format": "date" },
            "required": true
          },
          {
            "name": "groupBy",
            "in": "query",
            "schema": { "type": "string", "enum": ["day", "week", "month"], "default": "day" }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "date": { "type": "string" },
                          "income": { "type": "number" },
                          "expense": { "type": "number" }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/dashboard/sales-chart": {
      "get": {
        "summary": "Get sales chart data",
        "description": "Get time series data for sales volume and revenue",
        "tags": ["Dashboard"],
        "parameters": [
          {
            "name": "startDate",
            "in": "query",
            "schema": { "type": "string", "format": "date" },
            "required": true
          },
          {
            "name": "endDate",
            "in": "query",
            "schema": { "type": "string", "format": "date" },
            "required": true
          },
          {
            "name": "groupBy",
            "in": "query",
            "schema": { "type": "string", "enum": ["day", "week", "month"], "default": "day" }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "date": { "type": "string" },
                          "count": { "type": "integer" },
                          "revenue": { "type": "number" }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/dashboard/property-status": {
      "get": {
        "summary": "Get property status distribution",
        "tags": ["Dashboard"],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "status": { "type": "string" },
                          "count": { "type": "integer" }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/dashboard/recent-transactions": {
      "get": {
        "summary": "Get recent transactions",
        "description": "Get combined list of recent sales and financial transactions",
        "tags": ["Dashboard"],
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "schema": { "type": "integer", "default": 10 },
            "description": "Number of items to return"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": { "type": "string" },
                          "type": { "type": "string", "enum": ["sale", "income", "expense"] },
                          "amount": { "type": "number" },
                          "date": { "type": "string", "format": "date-time" },
                          "description": { "type": "string" }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
